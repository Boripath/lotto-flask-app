<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>‡πÇ‡∏û‡∏¢‡∏´‡∏ß‡∏¢‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<div class="lotto-container">
    {{ header_html|safe }}

    <!-- ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏à‡πà‡∏≤‡∏¢: radio button -->
    <form method="POST" class="form-inline">
        <label>‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏à‡πà‡∏≤‡∏¢:</label>
        <label class="radio-label">
            <input type="radio" name="pricerate" value="70" onchange="this.form.submit()" {% if pricerate==70 %}checked{% endif %}> 70 ‡∏ö‡∏≤‡∏ó
        </label>
        <label class="radio-label">
            <input type="radio" name="pricerate" value="90" onchange="this.form.submit()" {% if pricerate==90 %}checked{% endif %}> 90 ‡∏ö‡∏≤‡∏ó
        </label>
        <input type="hidden" name="action" value="set_pricerate">
    </form>

    <!-- ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡πÅ‡∏ó‡∏á -->
    <div class="bet-type-buttons">
        {% for bt in ["2 ‡∏ï‡∏±‡∏ß", "3 ‡∏ï‡∏±‡∏ß", "6 ‡∏Å‡∏•‡∏±‡∏ö"] %}
            <form method="POST" style="display:inline;">
                <input type="hidden" name="bet_type" value="{{ bt }}">
                <button type="submit" name="action" value="set_bet_type" class="btn-type {% if bet_type == bt %}selected{% endif %}">{{ bt }}</button>
            </form>
        {% endfor %}
    </div>

    <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÉ‡∏™‡πà‡πÄ‡∏•‡∏Ç‡πÄ‡∏ö‡∏¥‡πâ‡∏•/‡∏ï‡∏≠‡∏á -->
    <form method="POST" style="margin-bottom: 10px;">
        <button type="submit" name="action" value="toggle_double" class="btn-type {% if double_mode %}selected{% endif %}">+ ‡πÉ‡∏™‡πà‡πÄ‡∏•‡∏Ç‡πÄ‡∏ö‡∏¥‡πâ‡∏•/‡∏ï‡∏≠‡∏á</button>
    </form>

    <!-- ‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç -->
    <form method="POST" class="form-grid">
        <label>‡πÉ‡∏™‡πà‡πÄ‡∏•‡∏Ç:</label>
        <input type="text" name="numbers_input" required>
        <button type="submit" name="action" value="add_number" class="btn-blue">+ ‡πÉ‡∏™‡πà‡πÄ‡∏•‡∏Ç</button>
    </form>

    <p class="numbers-display">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÅ‡∏¢‡∏Å: {{ numbers|join(" ") }}</p>

    <!-- ‡πÉ‡∏™‡πà‡∏£‡∏≤‡∏Ñ‡∏≤ ‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó -->
    <form method="POST" class="form-grid">
        <label>‡πÉ‡∏™‡πà‡∏£‡∏≤‡∏Ñ‡∏≤</label>
        {% if bet_type == "2 ‡∏ï‡∏±‡∏ß" %}
            <input type="number" name="price_top" value="{{ price_top }}" placeholder="‡∏ö‡∏ô">
            <input type="number" name="price_bottom" value="{{ price_bottom }}" placeholder="‡∏•‡πà‡∏≤‡∏á">
        {% elif bet_type == "3 ‡∏ï‡∏±‡∏ß" %}
            <input type="number" name="price_top" value="{{ price_top }}" placeholder="‡∏ï‡∏£‡∏á">
            <input type="number" name="price_tod" value="{{ price_tod }}" placeholder="‡πÇ‡∏ï‡πä‡∏î">
        {% else %}
            <input type="number" name="price_top" value="{{ price_top }}" placeholder="‡∏ö‡∏ô">
            <input type="number" name="price_bottom" value="{{ price_bottom }}" placeholder="‡∏•‡πà‡∏≤‡∏á">
            <input type="number" name="price_tod" value="{{ price_tod }}" placeholder="‡πÇ‡∏ï‡πä‡∏î">
        {% endif %}
        <button type="submit" name="action" value="add_bill" class="btn-blue">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏¥‡∏•</button>
    </form>

    {% if bills %}
    <table class="bill-table">
        <thead><tr><th>#</th><th>‡πÄ‡∏•‡∏Ç</th><th>‡∏ö‡∏ô</th><th>‡∏•‡πà‡∏≤‡∏á</th><th>‡πÇ‡∏ï‡πä‡∏î</th><th></th></tr></thead>
        <tbody>
        {% for bill in bills %}
        <tr>
            <td>{{ bill.idx }}</td>
            <td>{{ bill.number }}</td>
            <td>{{ bill.top }}</td>
            <td>{{ bill.bottom }}</td>
            <td>{{ bill.tod }}</td>
            <td>
                <form method="POST" style="display:inline;">
                    <input type="hidden" name="bill_idx" value="{{ bill.idx }}">
                    <button type="submit" name="action" value="delete_bill">üóòÔ∏è</button>
                </form>
            </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    {% endif %}

    <form method="POST" class="form-grid">
        <label>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ä‡πà‡∏ß‡∏¢‡∏à‡∏≥:</label>
        <input type="text" name="memo" value="{{ memo }}">
        <button type="submit" name="action" value="set_memo">OK</button>
    </form>

    <div class="total-display">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: {{ total_amount }}</div>

    <form method="POST" class="form-buttons">
        <button type="submit" name="action" value="clear_input" class="btn-red">üßπ ‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á</button>
        <button type="submit" name="action" value="save_all" class="btn-green">üìÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏û‡∏¢</button>
    </form>
</div>
</body>
</html>
