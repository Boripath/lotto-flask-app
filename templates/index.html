<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡πÇ‡∏û‡∏¢‡∏´‡∏ß‡∏¢‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<div class="lotto-container">
    {{ header_html|safe }}

    <!-- ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏à‡πà‡∏≤‡∏¢ -->
    <form method="POST">
        <label>‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏à‡πà‡∏≤‡∏¢:</label>
        <label class="radio-label">
            <input type="radio" name="pricerate" value="70" onchange="this.form.submit()" {% if pricerate == 70 %}checked{% endif %}>70
        </label>
        <label class="radio-label">
            <input type="radio" name="pricerate" value="90" onchange="this.form.submit()" {% if pricerate == 90 %}checked{% endif %}>90
        </label>
        <input type="hidden" name="action" value="set_pricerate">
    </form>

    <!-- ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡πÅ‡∏ó‡∏á -->
    <form method="POST" class="bet-type-buttons">
        {% for btype in ["2 ‡∏ï‡∏±‡∏ß", "3 ‡∏ï‡∏±‡∏ß", "6 ‡∏Å‡∏•‡∏±‡∏ö"] %}
            <button class="btn-type {% if btype == bet_type %}selected{% endif %}" type="submit" name="bet_type" value="{{ btype }}">{{ btype }}</button>
        {% endfor %}
        <input type="hidden" name="action" value="set_bet_type">
    </form>

    <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÉ‡∏™‡πà‡πÄ‡∏•‡∏Ç‡πÄ‡∏ö‡∏¥‡πâ‡∏•/‡∏ï‡∏≠‡∏á -->
    <form method="POST">
        <button class="btn-type {% if double_mode %}selected{% endif %}" type="submit" name="action" value="toggle_double">‡πÉ‡∏™‡πà‡πÄ‡∏•‡∏Ç‡πÄ‡∏ö‡∏¥‡πâ‡∏•/‡∏ï‡∏≠‡∏á</button>
    </form>

    <!-- ‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç -->
    <form method="POST">
        <label>‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç:</label>
        <input type="text" name="numbers_input" placeholder="‡πÄ‡∏ä‡πà‡∏ô 123456" required>
        <button type="submit" name="action" value="add_number">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏•‡∏Ç</button>
    </form>

    <!-- ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏î‡∏•‡∏ö -->
    <div class="number-buttons">
        {% for num in numbers %}
        <form method="POST" style="display:inline;">
            <input type="hidden" name="delete_idx" value="{{ loop.index0 }}">
            <button type="submit" name="action" value="delete_number" class="number-btn">
                {{ num }}
            </button>
        </form>
        {% endfor %}
    </div>


    <!-- ‡πÉ‡∏™‡πà‡∏£‡∏≤‡∏Ñ‡∏≤ -->
    <form method="POST">
        {% if bet_type == "2 ‡∏ï‡∏±‡∏ß" %}
            <label>‡πÉ‡∏™‡πà‡∏£‡∏≤‡∏Ñ‡∏≤:</label>
            <input type="number" name="price_top" value="{{ price_top }}" placeholder="‡∏ö‡∏ô">
            <input type="number" name="price_bottom" value="{{ price_bottom }}" placeholder="‡∏•‡πà‡∏≤‡∏á">
        {% else %}
            <label>‡πÉ‡∏™‡πà‡∏£‡∏≤‡∏Ñ‡∏≤:</label>
            <input type="number" name="price_top" value="{{ price_top }}" placeholder="‡∏ï‡∏£‡∏á">
            <input type="number" name="price_tod" value="{{ price_tod }}" placeholder="‡πÇ‡∏ï‡πä‡∏î">
        {% endif %}
        <button type="submit" name="action" value="add_bill">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏¥‡∏•</button>
    </form>

    <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏™‡∏£‡∏∏‡∏õ‡∏ö‡∏¥‡∏• -->
    <div class="bill-summary">
        {{ bill_html|safe }}
    </div>

    <!-- ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ä‡πà‡∏ß‡∏¢‡∏à‡∏≥ -->
    <form method="POST" class="form-grid">
        <label>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ä‡πà‡∏ß‡∏¢‡∏à‡∏≥:</label>
        <input type="text" name="memo" value="{{ memo }}" 
               oninput="autoSaveMemo(this.value)">
        <input type="hidden" name="action" value="set_memo" id="memo-action">
    </form>
    
    <!-- ‡πÄ‡∏û‡∏¥‡πà‡∏° JavaScript ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ -->
    <script>
    function autoSaveMemo(value) {
        fetch("/", {
            method: "POST",
            headers: { "Content-Type": "application/x-www-form-urlencoded" },
            body: new URLSearchParams({
                "action": "set_memo",
                "memo": value
            })
        });
    }
    </script>


    <!-- ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏° -->
    <div class="total-display">
        ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: {{ total_amount }} ‡∏ö‡∏≤‡∏ó
    </div>

    <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏•‡πâ‡∏≤‡∏á/‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å -->
    <form method="POST" class="form-buttons">
        <button type="submit" name="action" value="clear_input" class="btn-red">üßπ ‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á</button>
        <button type="submit" name="action" value="save_all" class="btn-green">üì• ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏û‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
    </form>
</div>
</body>
</html>
